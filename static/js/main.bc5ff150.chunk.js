(this["webpackJsonpminesweeper-randomwalk"]=this["webpackJsonpminesweeper-randomwalk"]||[]).push([[0],{15:function(e,t,a){},16:function(e,t,a){},18:function(e,t,a){"use strict";a.r(t);var n=a(3),s=a(5),l=a.n(s),r=(a(15),a(2)),i=a(6),o=a(7),c=a(1),d=a(10),m=a(9),h=(a(16),a.p+"static/media/boom_sfx.0e4b1262.mp3"),u=a.p+"static/media/click_sfx.80cbe815.mp3",g=a(0);function b(e,t,a,n){var s=0,l=n,r=n;try{t>0&&(a>0&&"\ud83d\udca3"===e[t-1][a-1]&&(s+=1),"\ud83d\udca3"===e[t-1][a]&&(s+=1),a<r-1&&"\ud83d\udca3"===e[t-1][a+1]&&(s+=1)),a>0&&"\ud83d\udca3"===e[t][a-1]&&(s+=1),a<r-1&&"\ud83d\udca3"===e[t][a+1]&&(s+=1),t<l-1&&a>0&&"\ud83d\udca3"===e[t+1][a-1]&&(s+=1),"\ud83d\udca3"===e[t+1][a]&&(s+=1),a<r-1&&"\ud83d\udca3"===e[t+1][a+1]&&(s+=1)}catch(i){}finally{return s}}function v(e){return"string"==typeof e&&(!isNaN(e)&&!isNaN(parseFloat(e)))}var p=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={debug:!1,dimensions:9,maxTunnels:7,maxLength:13,revealed:!1,reset:!0,currMap:[],win:!1,lost:!1,showWin:!1,bombCounter:0,totalMoves:0,timer:0,timerStr:"00 : 00 : 00",playing:!1,timerStarted:!1,boom_sfx:new Audio(h),click_sfx:new Audio(u)},n.onChange=n.onChange.bind(Object(c.a)(n)),n.checkTiles=n.checkTiles.bind(Object(c.a)(n)),n.mapCheat=n.mapCheat.bind(Object(c.a)(n)),n.checkWin=n.checkWin.bind(Object(c.a)(n)),n.hideSHowWin=n.hideSHowWin.bind(Object(c.a)(n)),n.startTimer=n.startTimer.bind(Object(c.a)(n)),n.formatTime=n.formatTime.bind(Object(c.a)(n)),n.changePreset=n.changePreset.bind(Object(c.a)(n)),n.generateNew=n.generateNew.bind(Object(c.a)(n)),n.scaleIncreaseDecrease=n.scaleIncreaseDecrease.bind(Object(c.a)(n)),n.playBoom=n.playBoom.bind(Object(c.a)(n)),n.playClick=n.playClick.bind(Object(c.a)(n)),n}return Object(o.a)(a,[{key:"playBoom",value:function(){this.state.boom_sfx.play()}},{key:"playClick",value:function(){this.state.click_sfx.play()}},{key:"createArray",value:function(e,t){for(var a=[],n=0;n<t;n++){a.push([]);for(var s=0;s<t;s++)a[n].push(e)}return a}},{key:"onChange",value:function(e){"dimensions"!==e.target.name?e.target.value>0&&e.target.value<=1e3?this.setState(Object(r.a)({},e.target.name,this.validator(e.target.value))):e.target.value<1?this.setState(Object(r.a)({},e.target.name,1)):this.setState(Object(r.a)({},e.target.name,1e3)):e.target.value>2&&e.target.value<=100?this.setState(Object(r.a)({},e.target.name,this.validator(e.target.value))):e.target.value<3?this.setState(Object(r.a)({},e.target.name,3)):this.setState(Object(r.a)({},e.target.name,100))}},{key:"startTimer",value:function(){var e=this,t=setInterval((function(){e.state.timerStarted?(e.setState({timer:e.state.timer+1}),e.formatTime()):clearInterval(t)}),1e3)}},{key:"formatTime",value:function(){var e="0".concat(this.state.timer%60).slice(-2),t="".concat(Math.floor(this.state.timer/60)),a="0".concat(t%60).slice(-2),n="0".concat(Math.floor(this.state.timer/3600)).slice(-2);this.setState({timerStr:"".concat(n," : ").concat(a," : ").concat(e)})}},{key:"validator",value:function(e){var t=Number(e);return isNaN(t)?0:t}},{key:"mapCheat",value:function(e){alert("Map printed to console"),console.log("=".repeat(25)),console.log("Revealing the map..."),console.log("=".repeat(25)),console.log(this.state.currMap)}},{key:"createMap",value:function(){var e,t=this.state.dimensions,a=this.state.maxTunnels,n=this.state.maxLength,s=this.createArray(1,t),l=Math.floor(Math.random()*t),r=Math.floor(Math.random()*t),i=[[-1,0],[1,0],[0,-1],[0,1]],o=[];if(this.state.reset){for(this.state.debug&&(console.log("=".repeat(25)),console.log("CREATING A NEW MAP..."),console.log("Starting row: "+l),console.log("Starting column: "+r));a&&t&&n;){do{e=i[Math.floor(Math.random()*i.length)]}while(e[0]===-o[0]&&e[1]===-o[1]||e[0]===o[0]&&e[1]===o[1]);var c=Math.ceil(Math.random()*n),d=0;for(this.state.debug&&(console.log("Moving for "+c+" spaces"),console.log("Direction:"),console.log("[",e[0],e[1],"]"),-1===e[0]?console.log("(up)"):1===e[0]?console.log("(down)"):-1===e[1]?console.log("(left)"):1===e[1]&&console.log("(right)"));d<c;){if(0===l&&-1===e[0]||0===r&&-1===e[1]||l===t-1&&1===e[0]||r===t-1&&1===e[1]){this.state.debug&&console.log("Hit an edge");break}this.state.debug&&(console.log("=".repeat(25)),console.log("Current row: "+l),console.log("Current column: "+r)),Math.random()>.5?(s[l][r]=0,this.state.debug&&console.log("Created empty space")):(s[l][r]=2,this.state.debug&&console.log("Created Bomb")),l+=e[0],r+=e[1],d++}d&&(o=e,a--),this.state.debug&&a&&(console.log("=".repeat(25)),console.log("REMAINING TUNNELS: "+a))}for(var m=0,h=0;h<t;h++)for(var u=0;u<t;u++)2===s[h][u]?(s[h][u]="\ud83d\udca3",m++):s[h][u]="#";for(h=0;h<t;h++)for(u=0;u<t;u++)"\ud83d\udca3"!==s[h][u]&&(s[h][u]=b(s,h,u,t));this.state.debug&&(console.log("=".repeat(25)),console.log("MAP:"),console.log(s),console.log("=".repeat(25)),console.log("BOMBS: "+m),console.log("=".repeat(25))),this.setState({currMap:s,reset:!1,win:!1,lose:!1,showWin:!1,bombCounter:m,totalMoves:0,timer:0,timerStr:"00 : 00 : 00",playing:!1,timerStarted:!1})}else s=this.state.currMap;return s}},{key:"checkForNum",value:function(e,t){e=parseInt(e),t=parseInt(t);var a=document.getElementById("inner-"+(e-1)+"-"+t),n=document.getElementById(e-1+"-"+t),s=document.getElementById("inner-"+(e-1)+"-"+(t-1)),l=document.getElementById(e-1+"-"+(t-1)),r=document.getElementById("inner-"+(e-1)+"-"+(t+1)),i=document.getElementById(e-1+"-"+(t+1)),o=document.getElementById("inner-"+(e+1)+"-"+t),c=document.getElementById(e+1+"-"+t),d=document.getElementById("inner-"+(e+1)+"-"+(t-1)),m=document.getElementById(e+1+"-"+(t-1)),h=document.getElementById("inner-"+(e+1)+"-"+(t+1)),u=document.getElementById(e+1+"-"+(t+1)),g=document.getElementById("inner-"+e+"-"+(t-1)),b=document.getElementById(e+"-"+(t-1)),p=document.getElementById("inner-"+e+"-"+(t+1)),j=document.getElementById(e+"-"+(t+1));a&&v(a.innerHTML)&&"revealed"!==a.className&&(a.className="revealed",n.style.backgroundColor="white"),s&&v(s.innerHTML)&&"revealed"!==s.className&&(s.className="revealed",l.style.backgroundColor="white"),r&&v(r.innerHTML)&&"revealed"!==r.className&&(r.className="revealed",i.style.backgroundColor="white"),o&&v(o.innerHTML)&&"revealed"!==o.className&&(o.className="revealed",c.style.backgroundColor="white"),d&&v(d.innerHTML)&&"revealed"!==d.className&&(d.className="revealed",m.style.backgroundColor="white"),h&&v(h.innerHTML)&&"revealed"!==h.className&&(h.className="revealed",u.style.backgroundColor="white"),g&&v(g.innerHTML)&&"revealed"!==g.className&&(g.className="revealed",b.style.backgroundColor="white"),p&&v(p.innerHTML)&&"revealed"!==p.className&&(p.className="revealed",j.style.backgroundColor="white")}},{key:"revealSurroundings",value:function(e,t,a){t=parseInt(t),a=parseInt(a);var n=document.getElementById("inner-"+(t-1)+"-"+a),s=document.getElementById(t-1+"-"+a);n&&"\ud83d\udca3"!==n.innerHTML&&""===n.innerHTML&&"revealed"!==n.className&&(n.className="revealed","white"!==s.style.backgroundColor&&(s.style.backgroundColor="white",this.checkForNum(t-1,a),this.revealSurroundings(e,t-1,a)));var l=document.getElementById("inner-"+(t+1)+"-"+a),r=document.getElementById(t+1+"-"+a);l&&"\ud83d\udca3"!==l.innerHTML&&""===l.innerHTML&&"revealed"!==l.className&&(l.className="revealed","white"!==r.style.backgroundColor&&(r.style.backgroundColor="white",this.checkForNum(t+1,a),this.revealSurroundings(e,t+1,a)));var i=document.getElementById("inner-"+t+"-"+(a-1)),o=document.getElementById(t+"-"+(a-1));i&&"\ud83d\udca3"!==i.innerHTML&&""===i.innerHTML&&"revealed"!==i.className&&(i.className="revealed","white"!==o.style.backgroundColor&&(o.style.backgroundColor="white",this.checkForNum(t,a-1),this.revealSurroundings(e,t,a-1)));var c=document.getElementById("inner-"+t+"-"+(a+1)),d=document.getElementById(t+"-"+(a+1));c&&"\ud83d\udca3"!==c.innerHTML&&""===c.innerHTML&&"revealed"!==c.className&&(c.className="revealed","white"!==d.style.backgroundColor&&(d.style.backgroundColor="white",this.checkForNum(t,a+1),this.revealSurroundings(e,t,a+1)))}},{key:"revealAll",value:function(){for(var e=0;e<this.state.dimensions;e++)for(var t=0;t<this.state.dimensions;t++)try{var a=document.getElementById(e+"-"+t);"\ud83d\udca3"!==document.getElementById("inner-"+e+"-"+t).innerHTML&&(a.style.backgroundColor="white")}catch(n){}}},{key:"resetTiles",value:function(){for(var e=0;e<this.state.dimensions;e++)for(var t=0;t<this.state.dimensions;t++)try{var a=document.getElementById(e+"-"+t),n=document.getElementById("inner-"+e+"-"+t);a.style.border="",a.style.backgroundColor="",n.className="hidden"}catch(s){}}},{key:"generateNew",value:function(){this.setState({revealed:!1,reset:!0,map:this.createMap(),win:!1,lost:!1}),this.resetTiles()}},{key:"changePreset",value:function(e){var t=e.target.value;"Easy"===t?this.setState({dimensions:9,maxTunnels:7,maxLength:13}):"Medium"===t?this.setState({dimensions:16,maxTunnels:20,maxLength:60}):"Hard"===t?this.setState({dimensions:22,maxTunnels:45,maxLength:80}):"Very Hard"===t&&this.setState({dimensions:28,maxTunnels:60,maxLength:110})}},{key:"checkWin",value:function(){for(var e=!0,t=0;t<this.state.dimensions;t++)for(var a=0;a<this.state.dimensions;a++)try{var n=document.getElementById("inner-"+t+"-"+a);"\ud83d\udca3"!==n.innerHTML&&"hidden"===n.className&&(e=!1)}catch(s){}e?this.setState({win:!0,showWin:!0,revealed:!0,timerStarted:!1}):this.setState({win:!1})}},{key:"hideSHowWin",value:function(){this.setState({showWin:!1})}},{key:"checkTiles",value:function(e){if(this.state.win)window.confirm("You have won the game! Would you like to reset?")&&(this.setState({revealed:!1,map:this.createMap(),reset:!0,win:!1}),this.resetTiles());else if(this.state.lost)window.confirm("You have lost the game! Would you like to reset?")&&(this.setState({revealed:!1,map:this.createMap(),reset:!0,lost:!1}),this.resetTiles());else if(this.state.timerStarted||(this.setState({timerStarted:!0}),this.startTimer()),this.state.playing||this.setState({playing:!0}),!1===this.state.win)if("mines"===e.target.getAttribute("data-tiletype"))this.playBoom(),alert("You step on a mine. You lost!"),this.revealAll(),this.setState({revealed:!0,lost:!0,timerStarted:!1});else{var t=document.getElementById("inner-"+e.target.id);if(null!==t&&(this.playClick(),"revealed"!==t.className)){t.className="revealed";var a=document.getElementById(e.target.id),n=e.target.id.split("-")[0],s=e.target.id.split("-")[1];a.style.backgroundColor="white",""===t.innerHTML&&this.checkForNum(n,s),this.revealSurroundings(this.state.currMap,n,s);var l=this.state.totalMoves;l++,this.setState({totalMoves:l}),this.forceUpdate(),this.checkWin()}}}},{key:"scaleIncreaseDecrease",value:function(e){if("scale-increase"===e.target.name){for(var t=(s=document.getElementsByTagName("td"))[0].offsetWidth,a=s[0].offsetHeight,n=0;n<s.length;n++)s[n].style.width=t+10+"px",s[n].style.height=a+10+"px";localStorage.setItem("currentWidth",t+10),localStorage.setItem("currentHeight",a+10)}else if("scale-decrease"===e.target.name){var s;for(t=(s=document.getElementsByTagName("td"))[0].offsetWidth,a=s[0].offsetHeight,n=0;n<s.length;n++)s[n].style.width=t-10+"px",s[n].style.height=a-10+"px";localStorage.setItem("currentWidth",t-10),localStorage.setItem("currentHeight",a-10)}else"reset"==e.target.name&&(!this.state.playing||this.state.win||this.state.lost||window.confirm("Warning! Resetting the scale will refresh the page! So current game will be aborted. Are you sure you want to reset now?"))&&(localStorage.setItem("currentWidth",null),localStorage.setItem("currentHeight",null),window.location.reload())}},{key:"setScale",value:function(){var e=localStorage.getItem("currentWidth"),t=localStorage.getItem("currentHeight");if(null!==e&&null!==t)for(var a=document.getElementsByTagName("td"),n=0;n<a.length;n++)a[n].style.width=e+"px",a[n].style.height=t+"px"}},{key:"render",value:function(){var e=this,t=this.createMap();this.setScale();for(var a=document.getElementsByTagName("iframe"),n=0;n<a.length;n++)a[n].remove();return Object(g.jsxs)("div",{className:"container",children:[Object(g.jsxs)("div",{className:"form-group row text-center",children:[Object(g.jsxs)("div",{className:"inline",children:[Object(g.jsx)("label",{children:"dimensions"}),Object(g.jsx)("input",{className:"form-control",name:"dimensions",type:"number",min:"1",max:"1000",value:this.state.dimensions,onChange:this.onChange})]}),Object(g.jsxs)("div",{className:"inline",children:[Object(g.jsx)("label",{children:"maxTunnels"}),Object(g.jsx)("input",{className:"form-control",name:"maxTunnels",type:"number",min:"1",max:"1000",value:this.state.maxTunnels,onChange:this.onChange})]}),Object(g.jsxs)("div",{className:"inline",children:[Object(g.jsx)("label",{children:"maxLength"}),Object(g.jsx)("input",{className:"form-control",name:"maxLength",type:"number",min:"1",max:"1000",value:this.state.maxLength,onChange:this.onChange})]}),Object(g.jsxs)("div",{className:"inline",children:[Object(g.jsx)("label",{children:"Preset"}),Object(g.jsxs)("select",{className:"form-control",name:"preset",onChange:this.changePreset,children:[Object(g.jsx)("option",{value:"Easy",children:"Easy (9x9)"}),Object(g.jsx)("option",{value:"Medium",children:"Medium (16x16)"}),Object(g.jsx)("option",{value:"Hard",children:"Hard (22x22)"}),Object(g.jsx)("option",{value:"Very Hard",children:"Very Hard (28x28)"})]})]}),Object(g.jsxs)("div",{className:"inline",children:[Object(g.jsx)("label",{children:"Generate"}),Object(g.jsx)("input",{className:"form-control",type:"button",onClick:this.generateNew,value:"Regenerate"})]}),Object(g.jsxs)("div",{className:"inline",children:[Object(g.jsx)("label",{children:"Scale"}),Object(g.jsxs)("div",{className:"flex-row-center",children:[Object(g.jsx)("input",{className:"form-control",style:{padding:"1px",maxWidth:"30px"},type:"button",name:"scale-increase",onClick:this.scaleIncreaseDecrease,value:"+"}),Object(g.jsx)("input",{className:"form-control",style:{padding:"1px",maxWidth:"30px"},type:"button",name:"scale-decrease",onClick:this.scaleIncreaseDecrease,value:"-"}),Object(g.jsx)("span",{name:"reset",onClick:this.scaleIncreaseDecrease,children:Object(g.jsx)("input",{className:"form-control",style:{padding:"1px",maxWidth:"100px",cursor:"pointer",background:"white"},type:"text",id:"no-select",name:"reset",value:"Reset",disabled:!0})})]})]})]}),Object(g.jsx)("table",{className:"grid",children:Object(g.jsx)("thead",{children:t.map((function(t,a){return Object(g.jsx)("tr",{children:t.map((function(t,n){return Object(g.jsx)("td",{className:e.state.revealed?"cell-reveal":"cell-hidden",id:a+"-"+n,"data-tiletype":"\ud83d\udca3"===t?"mines":"notmines",onClick:e.checkTiles,children:Object(g.jsx)("span",{id:"inner-"+a+"-"+n,className:e.state.revealed?"revealed":"hidden","data-tiletype":"\ud83d\udca3"===t?"mines":"notmines",children:"\ud83d\udca3"===t?"\ud83d\udca3":0===t?"":t})},n)}))},a)}))})}),Object(g.jsxs)("div",{className:"form-group row text-center",children:[Object(g.jsxs)("div",{className:"inline",children:[Object(g.jsx)("label",{children:"Status"}),Object(g.jsx)("input",{className:"form-control default-cursor",type:"button",value:this.state.playing?this.state.lost?"Lost":this.state.win?"Win":"Playing":"-"})]}),Object(g.jsxs)("div",{className:"inline",children:[Object(g.jsx)("label",{children:"Bomb"}),Object(g.jsx)("input",{className:"form-control default-cursor",type:"button",value:this.state.bombCounter})]}),Object(g.jsxs)("div",{className:"inline",children:[Object(g.jsx)("label",{children:"Moves"}),Object(g.jsx)("input",{className:"form-control default-cursor",type:"button",value:this.state.totalMoves})]}),Object(g.jsxs)("div",{className:"inline",children:[Object(g.jsx)("label",{children:"Time"}),Object(g.jsx)("input",{className:"form-control default-cursor",type:"button",value:this.state.timerStr})]}),Object(g.jsxs)("div",{className:"inline",children:[Object(g.jsx)("label",{children:"Cheat"}),Object(g.jsx)("input",{className:"form-control",name:"cheat",type:"button",onClick:this.mapCheat,value:"Show"})]}),Object(g.jsxs)("div",{className:"inline",children:[Object(g.jsx)("label",{children:"Sourcecode"}),Object(g.jsx)("input",{className:"form-control",name:"sourcecode",type:"button",onClick:function(){window.open("https://github.com/Dadangdut33/minesweeper-randomwalk","_blank")},value:"Github"})]}),Object(g.jsxs)("div",{className:"inline",children:[Object(g.jsx)("label",{children:"Debug"}),Object(g.jsx)("input",{className:"form-control",name:"debug",type:"button",onClick:function(){return e.setState({debug:!e.state.debug})},value:this.state.debug?"\u2705":"\u274c"})]})]}),Object(g.jsx)("div",{className:this.state.showWin?"block":"hidden",id:"win-popup",children:Object(g.jsx)("div",{className:"popup",children:Object(g.jsxs)("div",{className:"popup-content",children:[Object(g.jsx)("h2",{children:" Congratulations! You Won the game!"}),Object(g.jsx)("input",{className:"form-control",type:"button",onClick:this.hideSHowWin,value:"Okay"})]})})})]})}}]),a}(n.Component);l.a.render(Object(g.jsx)(p,{}),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.bc5ff150.chunk.js.map